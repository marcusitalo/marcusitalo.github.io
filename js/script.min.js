$(document).ready(function () {
  $(".itemmenu").eq(0).parent().addClass("selectedmenu");

  $("#menu a").click(function (event) {
    $("html,body").animate({ scrollTop: $(this.hash).offset().top }, 2000);
    if ($("#menuicon").css("display") != "none") {
      $(".menuiconoff").addClass("menuiconon");
      $(".menuiconon").removeClass("menuiconoff");
      $("#menu ul li").fadeOut(1000);
      $("#menu ul").animate({ width: "toggle" }, 2000);
    }
    return false;
  });

  $(".menuiconon").on("click", function () {
    $(this).removeClass("menuiconon");
    $(this).addClass("menuiconoff");
    $("#menu ul li").fadeIn(2500);
    $("#menu ul").animate({ width: "toggle" }, 1000);
  });

  $(".menuiconoff").on("click", function () {
    $(this).removeClass("menuiconoff");
    $(this).addClass("menuiconon");
    $("#menu ul li").fadeOut(1000);
    $("#menu ul").animate({ width: "toggle" }, 2000);
  });

  $(".post-painel:not(.welcome) p").each(function (i, elemento) {
    var texto = $(elemento).text();
    $(elemento).html(
      texto.substring(0, 110) +
        "<a href='#' class='expandirConteudo' data-value='" +
        texto +
        "' >...</a>"
    );
  });

  $(".expandirConteudo").on("click", function () {
    var pai = $(this).parent();
    $(pai).html($(this).attr("data-value"));
    $(pai).addClass("expandidoConteudo");
    return false;
  });

  $(".expandidoConteudo").on("mouseout", function () {
    var p = $(this);
    var texto = $(p).text();
    $(p).html(
      texto.substring(0, 100) +
        "<a href='#' class='expandirConteudo' data-value='" +
        texto +
        "' >...</a>"
    );
    $(p).removeClass("expandidoConteudo");
    return false;
  });

  function calcularIdade(data) {
    var now = new Date();

    var yearNow = now.getYear();
    var monthNow = now.getMonth();
    var dateNow = now.getDate();
    var dob = new Date(
      data.substring(6, 10),
      data.substring(3, 5) - 1,
      data.substring(0, 2)
    );

    var yearDob = dob.getYear();
    var monthDob = dob.getMonth();
    var dateDob = dob.getDate();
    var age = {};
    yearAge = yearNow - yearDob;

    if (monthNow >= monthDob) var monthAge = monthNow - monthDob;
    else {
      yearAge--;
      var monthAge = 12 + monthNow - monthDob;
    }

    if (dateNow >= dateDob) var dateAge = dateNow - dateDob;
    else {
      monthAge--;
      var dateAge = 31 + dateNow - dateDob;

      if (monthAge < 0) {
        monthAge = 11;
        yearAge--;
      }
    }

    age = {
      years: yearAge,
      months: monthAge,
      days: dateAge,
    };
    return age.years;
  }

  $("span#age").text(calcularIdade("01/06/1985"));
});
